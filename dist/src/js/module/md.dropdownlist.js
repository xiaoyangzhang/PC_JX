/*! pc_jx - v1.0.0 - 2016-07-28 */
define(function(require,exports,module){$public=require("public"),function($,window,document){function SelectList(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="selectlist",defaults={
//默认属性配置
enable:!0,//选择列表是否可用
zIndex:10,//选择列表z-index值，如需兼容IE6/7,必须加此属性
width:100,//选择列表宽度
height:32,//选择列表高度
border:null,//选择列表边框
borderRadius:null,//选择列表圆角
showMaxHeight:null,//选择列表显示最大高度
optionHeight:34,//选择列表单项高度
triangleSize:6,//右侧小三角大小
triangleColor:"#999",//右侧小三角颜色
topPosition:!1,//选择列表项在列表框上部显示,默认在下边显示
speed:100,//选择列表框显示动画速度（毫秒）
onChange:function(){"city"!=this.element.id&&$public.selectvalid(this.element.id)},//自定义模拟选择列表项change事件
onSuccess:function(element){var cur_value=$("#"+element.id+"_").val(),olis=$("#"+element.id).find("li");olis.filter(function(){$(this).attr("data-value")==cur_value&&$(this).trigger("click")})}};SelectList.prototype={init:function(){var that=this,element=this.element;that.replaceProtoypeSelect(element),that.setSelectEvent(element),that.setSelectStyle(element),that.settings.onSuccess.call(that,element)},getSelectID:function(element){var $this=$(element),selectID=$this.attr("id");return"undefined"!=typeof selectID?selectID:selectID=""},getSelectName:function(element){var that=this,$this=$(element),selectName=$this.attr("name");return"undefined"!=typeof selectName?selectName:that.getSelectID($this)},getSelectClassName:function(element){var $this=$(element),tempClassNameArray=[],classNameArray=[],className=$this.attr("class");if("undefined"!=typeof className){classNameArray=className.split(" "),classNameArray.sort(),tempClassNameArray=[classNameArray[0]];for(var i=1;i<classNameArray.length;i++)classNameArray[i]!==tempClassNameArray[tempClassNameArray.length-1]&&tempClassNameArray.push(classNameArray[i]);return tempClassNameArray.join(" ")}return className=""},getSelectedIndex:function(element){var $this=$(element),selectedIndex=$this.get(0).selectedIndex||0;return selectedIndex},getOptionCount:function(element){var $this=$(element);return $this.children().length},getOptionText:function(element){for(var that=this,$this=$(element),$option=$this.children(),optionText=[],selectLength=that.getOptionCount($this),i=0;i<selectLength;i++)optionText[i]=$.trim($option.eq(i).text());return optionText},getSelectedOptionText:function(element){var that=this,$this=$(element),selectedIndex=that.getSelectedIndex($this),optionText=that.getOptionText($this);return optionText[selectedIndex]},getSelectedOptionValue:function(element){var that=this,$this=$(element),selectedIndex=that.getSelectedIndex($this),optionValue=that.getOptionValue($this);return optionValue[selectedIndex]},getOptionValue:function(element){for(var that=this,$this=$(element),$option=$this.children(),optionValue=[],selectLength=that.getOptionCount($this),i=0;i<selectLength;i++)optionValue[i]=$option.eq(i).val();return optionValue},renderSelect:function(element){for(var that=this,$this=$(element),selectID=that.getSelectID($this),selectName=that.getSelectName($this),selectClassName=that.getSelectClassName($this),selectOptionText=that.getOptionText($this),selectedOptionText=that.getSelectedOptionText($this),selectOptionValue=that.getOptionValue($this),selectedIndex=that.getSelectedIndex($this),selectedValue=that.getSelectedOptionValue($this),selectLength=that.getOptionCount($this),selectHTML='<span id="'+selectID+'" class="select-wrapper '+selectClassName+'"><input type="hidden" name="'+selectName+'" value="'+selectedValue+'" /><i class="icon select-down"></i><input type="button" class="select-button" value="'+selectedOptionText+'" /><div class="select-list"><ul>',selectListHTML="",i=0;i<selectLength;i++)selectListHTML=i!==selectedIndex?selectListHTML+'<li data-value="'+selectOptionValue[i]+'">'+selectOptionText[i]+"</li>":selectListHTML+'<li data-value="'+selectOptionValue[i]+'" class="selected">'+selectOptionText[i]+"</li>";return selectHTML=selectHTML+selectListHTML+"</ul></div></span>"},replaceProtoypeSelect:function(element){var that=this,$this=$(element),selectHTML=that.renderSelect($this);$this.replaceWith(selectHTML)},setSelectDisabled:function(element){var that=this,$this=$(element),selectID="#"+that.getSelectID($this);$(selectID).children("i").addClass("disabled").end().children(".select-button").attr("disabled","disabled")},setSelectEnabled:function(element){var that=this,$this=$(element),selectID="#"+that.getSelectID($this);$(selectID).children("i").removeClass("disabled").end().children(".select-button").removeAttr("disabled")},setSelectStyle:function(element){var that=this,$this=$(element),selectID="#"+that.getSelectID($this),selectLength=that.getOptionCount($this);$(selectID).css({"z-index":that.setStyleProperty(that.settings.zIndex),width:that.setStyleProperty(that.settings.width)-2+"px",height:that.setStyleProperty(that.settings.height)+"px"}),$(selectID).children(".select-down").css({top:that.setStyleProperty((that.settings.height-that.settings.triangleSize)/2)+"px","border-width":that.setStyleProperty(that.settings.triangleSize)+"px","border-color":that.setStyleProperty(that.settings.triangleColor)+" transparent transparent transparent"}),$(selectID).children(".select-button").css({width:function(){return that.settings.width?that.settings.width-2+"px":void 0},height:that.setStyleProperty(that.settings.height)+"px",border:that.setStyleProperty(that.settings.border),"border-radius":that.setStyleProperty(that.settings.borderRadius)+"px"}),$(selectID).children(".select-list").css({width:function(){return that.settings.width?that.settings.width-2+"px":void 0},top:function(index,value){if(that.settings.height)return that.settings.topPosition?that.settings.optionHeight?-that.settings.optionHeight*selectLength-3+"px":void 0:that.settings.height+1+"px"},"max-height":that.setStyleProperty(that.settings.showMaxHeight)+"px"}),$(selectID+" ul").css({"max-height":that.setStyleProperty(that.settings.showMaxHeight)+"px","line-height":that.setStyleProperty(that.settings.optionHeight)+"px"}),$(selectID+" li").css({height:that.setStyleProperty(that.settings.optionHeight)+"px"})},setStyleProperty:function(styleProperty){return styleProperty?styleProperty:void 0},setSelectEvent:function(element){var that=this,$this=$(element),showSpeed=that.settings.speed,border=that.settings.border,selectID="#"+that.getSelectID($this),selectedIndex=(that.getSelectName($this),that.getSelectedIndex($this)),selectLength=that.getOptionCount($this),selectBtn=$(selectID+' input[type="button"]'),selectItem=$(selectID+" li");return that.settings.enable?($(selectID).click(function(event){event.stopPropagation(),$(this).children(".select-list").slideToggle(showSpeed),that.settings.border?$(this).css({border:border}):$(this).addClass("focus"),$(this).find("li").each(function(){$(this).text()===selectBtn.val()&&$(this).addClass("selected").siblings().removeClass("selected")}),$(".select-wrapper").css("z-index",10),$(".focus").css("z-index",20)}).on("focusin",'input[type="button"]',function(){$(".select-wrapper").children(".select-list").slideUp(showSpeed),$(".select-wrapper").hasClass("focus")&&$(".select-wrapper").removeClass("focus")}).on("keyup",'input[type="button"]',function(event){var $selectedItem=$(this).siblings(".select-list").children().children("li.selected");switch(event.keyCode){
//Enter
case 13:$(this).val($selectedItem.text()).prev().prev().val($selectedItem.attr("data-value")),$.isFunction(that.settings.onChange)&&that.settings.onChange.call(that);break;
//Esc
case 27:$(this).siblings(".select-list").slideUp(showSpeed);break;
//Up
case 38:event.preventDefault(),0!==selectedIndex?($selectedItem.removeClass("selected").prev().addClass("selected"),selectedIndex-=1):($selectItem.last().addClass("selected").siblings().removeClass("selected"),selectedIndex=selectLength-1),$selectedItem=$(this).siblings(".select-list").children().children("li.selected"),$(this).val($selectedItem.text()).prev().prev().val($selectedItem.attr("data-value"));break;
//Down
case 40:event.preventDefault(),selectedIndex<selectLength-1?($selectedItem.removeClass("selected").next().addClass("selected"),selectedIndex+=1):($selectItem.first().addClass("selected").siblings().removeClass("selected"),selectedIndex=0),$selectedItem=$(this).siblings(".select-list").children().children("li.selected"),$(this).val($selectedItem.text()).prev().prev().val($selectedItem.attr("data-value"))}}).children("i").removeClass("disabled").end().children(".select-button").removeAttr("disabled"),selectItem.on("click",function(event){return event.stopPropagation(),$(this).addClass("selected").siblings().removeClass("selected").parent().parent().slideUp(showSpeed).prev().val($(this).text()).siblings('input[type="hidden"]').val($(this).attr("data-value")),$(".select-wrapper").hasClass("focus")&&$(".select-wrapper").removeClass("focus"),$.isFunction(that.settings.onChange)&&that.settings.onChange.call(that),!1}).on("autoclick",function(event){return event.stopPropagation(),$(this).addClass("selected").siblings().removeClass("selected").parent().parent().slideUp(showSpeed).prev().val($(this).text()).siblings('input[type="hidden"]').val($(this).attr("data-value")),$(".select-wrapper").hasClass("focus")&&$(".select-wrapper").removeClass("focus"),!1}).hover(function(){$(this).addClass("selected").siblings().removeClass("selected")}).mouseenter(function(event){var target=event.target,realWidth=target.offsetWidth,wrapperWidth=target.scrollWidth,text=$(target).text();realWidth<wrapperWidth&&$(target).attr("title",text)}),$(document).on("click",function(){$(".select-wrapper").css("z-index",10),$(this).find(".select-list").slideUp(showSpeed),$(".select-wrapper").hasClass("focus")&&$(".select-wrapper").removeClass("focus")}),void 0):void $(selectID).children("i").addClass("disabled").end().children(".select-button").attr("disabled","disabled")}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||($.data(this,"plugin_"+pluginName,new SelectList(this,options)),options.topPosition?options.zIndex++:options.zIndex--)}),this}}(jQuery,window,document)});
/*! pc_jx 最后修改于： 2016-07-28 */