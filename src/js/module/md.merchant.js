/*! PC_JX - v1.0.0 - 2016-11-09 */
define(function(require,exports,module){require("core"),require("widget"),require("datepicker"),require("uploadfiles"),require("validform"),require("dropdownlist"),$public=require("public"),$test=function(){this.init.apply(this,arguments)},$test.prototype={init:function(){$("#tm").datepicker(),$("select").selectlist({zIndex:10,width:300,height:32,onChange:function(){}});var a={tiptype:3,label:".label",showAllError:!0,datatype:{addressL:/^([\w\W]{1,100})?$/,nmname:/^[\d\w\u4e00-\u9fa5,\—]{2,15}$/,kefutel:/^0\d{2,3}-?\d{7,8}$|^1[0-9]{10}$/},ajaxPost:!0},b=[{ele:".fixdetel",datatype:"kefutel",nullmsg:"请输入客服电话",errormsg:"请检查客服电话格式，例:(0731-83187200)或手机号码!"},{ele:".gray",datatype:"addressL",nullmsg:"请输入店铺地址",errormsg:"请输入0~100位字符！"},{ele:".niname",datatype:"nmname",nullmsg:"请填写信息",errormsg:"请输入2~15位字符，支持中文、字母、数字、下划线"}],c=$(".registerform").Validform(a).addRule(b);$("#save").on("click",function(){var a=c.check(),b=$public.allimgvalid($(".imgbox"));if(a&&b){var d=$public.paramcompare($(".registerform").serializeArray());$.post($public.urlpath.merchant,d,function(a){$public.isLogin(a),a.success?($public.dialog.msg("保存成功","success"),setTimeout(function(){location.reload()},1e3)):($public.dialog.msg(a.msg,"error"),a.value&&(window.location.href=a.value))})}}),$(".address").each(function(){$("#addressLen").html($(this).val().length)}),$(".merchantDesc").each(function(){$("#merchantLen").html($(this).val().length)}),$(document).on("input propertychange",".address",function(){var a=$(this).val(),b=a.length;return b>100&&(b=100,$(this).val(a.substr(0,100))),$("#addressLen").html(b),!1}),$(document).on("input propertychange",".merchantDesc",function(){var a=$(this).val(),b=a.length;return b>500&&(b=500,$(this).val(a.substr(0,500))),$("#merchantLen").html(b),!1})}},module.exports=new $test});
/*! PC_JX xiongzhaoling 最后修改于： 2016-11-09 */